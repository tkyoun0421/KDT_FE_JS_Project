{"version":3,"sources":["src/js/firebase.js","src/js/upload.js"],"names":["firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","db","firestore","exports","storage","_firebase","require","btnSubmitEl","document","querySelector","addEventListener","uploadData","inputFileEl","file","files","storageRef","ref","savePath","child","name","upload","put","rankEl","nameEl","on","error","console","snapshot","getDownloadURL","then","url","item","id","Date","getTime","rank","value","photo","collection","add","window","location","href","catch","log","showPreviewImg","e","imgEl","target","reader","FileReader","onload","event","setAttribute","result","readAsDataURL"],"mappings":"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","file":"upload.267c3b0c.js","sourceRoot":"..","sourcesContent":["const firebaseConfig = {\r\n    apiKey: 'AIzaSyDBWZgf69JelbmqlPPPzj56W5yFL-Q5wZo',\r\n    authDomain: 'project-1-8debf.firebaseapp.com',\r\n    projectId: 'project-1-8debf',\r\n    storageBucket: 'project-1-8debf.appspot.com',\r\n    messagingSenderId: '386056815137',\r\n    appId: '1:386056815137:web:92425cb061808073ed9960',\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const db = firebase.firestore();\r\nexport const storage = firebase.storage();\r\n\r\n// function loadData() {\r\n//     db.collection('profile')\r\n//         .get()\r\n//         .then((res) => {\r\n//             res.forEach((doc) => {\r\n//                 const profileListBtmEl =\r\n//                     document.querySelector('.profile-list-btm');\r\n//                 const div = document.createElement('div');\r\n//                 let template = `<div class=\"profile-info\">\r\n//                 <input\r\n//                 class=\"checkbox\"\r\n//                 type=\"checkbox\"\r\n//                 id=\"profile-item\"\r\n//                 name=\"profile-item\"\r\n//                 />\r\n//                 <span class=\"name\">${doc.data().name}</span>\r\n//                 <span class=\"rank\">${doc.data().rank}</span>\r\n//                 </div>\r\n//                 `;\r\n\r\n//                 div.classList.add('profile-item');\r\n//                 div.innerHTML = template;\r\n//                 profileListBtmEl.append(div);\r\n//                 div.style.backgroundImage = `url(${doc.data().photo})`;\r\n//             });\r\n//         });\r\n// }\r\n\r\n// loadData();\r\n","import { db, storage } from './firebase';\r\n\r\nconst btnSubmitEl = document.querySelector('.btn-submit');\r\nbtnSubmitEl.addEventListener('click', uploadData);\r\n\r\nfunction uploadData() {\r\n    const inputFileEl = document.querySelector('.input-file');\r\n    const file = inputFileEl.files[0];\r\n    const storageRef = storage.ref();\r\n    const savePath = storageRef.child('image/' + file.name);\r\n    const upload = savePath.put(file);\r\n\r\n    const rankEl = document.querySelector('.input-rank');\r\n    const nameEl = document.querySelector('.input-name');\r\n\r\n    upload.on(\r\n        'state_changed',\r\n        null,\r\n        (error) => {\r\n            console.error('실패 사유는', error);\r\n        },\r\n        () => {\r\n            upload.snapshot.ref.getDownloadURL().then((url) => {\r\n                let item = {\r\n                    id: new Date().getTime(),\r\n                    rank: rankEl.value,\r\n                    name: nameEl.value,\r\n                    photo: url,\r\n                };\r\n                db.collection('profile')\r\n                    .add(item)\r\n                    .then(() => {\r\n                        window.location.href = './index.html';\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                    });\r\n            });\r\n        }\r\n    );\r\n}\r\n\r\nconst inputFileEl = document.querySelector('.input-file');\r\ninputFileEl.addEventListener('change', showPreviewImg);\r\n\r\nfunction showPreviewImg(e) {\r\n    const imgEl = document.querySelector('.image');\r\n    const file = e.target.files[0];\r\n\r\n    if (file) {\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = (event) => {\r\n            imgEl.setAttribute('src', event.target.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n}\r\n"]}