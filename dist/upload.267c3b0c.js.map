{"version":3,"sources":["src/js/firebase.js","src/js/upload.js"],"names":["firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","db","firestore","exports","storage","_firebase","require","btnSubmitEl","document","querySelector","addEventListener","uploadData","inputFileEl","file","files","storageRef","ref","savePath","child","name","upload","put","rankEl","nameEl","on","error","console","snapshot","getDownloadURL","then","url","item","id","Date","getTime","rank","value","photo","collection","add","window","location","href","catch","log","showPreviewImg","e","imgEl","target","reader","FileReader","onload","event","setAttribute","result","readAsDataURL"],"mappings":";;ACAA,IAAAa,SAAA,GAAAC,OAAA;AAEA,IAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAa,CAAC,aAAa,CAAC;AACzDF,WAAW,CAACG,gBAAgB,CAAC,OAAO,EAAEC,UAAU,CAAC;AAEjD,SAASA,UAAUA,CAAA,EAAG;ADLtB,ECMI,EDNEnB,ECMIoB,WAAW,CDND,ECMIJ,CDND,OCMS,CAACC,aAAa,CAAC,aAAa,CAAC;EDLzDhB,ACMA,IAAMoB,EDNA,EAAE,ACME,GAAGD,WAAW,CAACE,KAAK,CAAC,CAAC,CAAC,kBDNgB;EACjDpB,ACMA,IAAMqB,MDNI,EAAE,ECMI,GAAGX,iBAAO,CAACY,GAAG,CAAC,CAAC,KDNa;EAC7CrB,ACMA,IAAMsB,KDNG,EAAE,CCMG,GAAGF,UAAU,CAACG,EDNA,GCMK,CAAC,QAAQ,GAAGL,IAAI,CAACM,IAAI,CAAC;EDLvDvB,ACMA,IAAMwB,MAAM,GDNC,ACMEH,EDNA,MCMQ,CAACI,GAAG,CAACR,IAAI,CAAC,aDNW;EAC5ChB,ACOA,IAAMyB,MAAM,GAAGd,IDPE,EAAE,ECOI,CAACC,WDPS,ECOI,CAAC,aAAa,CAAC;EDNpDX,ACOA,IAAMyB,CDPD,EAAE,GCOK,GAAGf,QAAQ,CAACC,aAAa,CAAC,aAAa,CAAC;ADNxD,CAAC,CCQGW,MAAM,CAACI,EAAE,CACL,eAAe,EACf,IAAI,EACJ,UAACC,KAAK,EAAK;ADTnB1B,ICUY2B,IDVJ,CAAC1B,ECUU,CAACyB,KAAK,CAAC,IDVJ,CAACjC,GCUW,EAAEiC,KAAK,CAAC,GDVL,CAAC;AAE/B,ECSC,CAAC,CDTIxB,CCUL,CDVO,GAAGF,QAAQ,ACUZ,CDVaG,SAAS,CAAC,CAAC;AAACC,ICW3BiB,GDX2B,CAAAnB,EAAA,ACWrB,CAAC0B,EDXoB1B,EAAA,ICWZ,CAACe,GAAG,CAACY,cAAc,CAAC,CAAC,CAACC,IAAI,CAAC,UAACC,GAAG,EAAK;ADVxD,IAAM1B,ECWG,IAAI2B,CDXA,GAAGhC,ACWC,GAAG,KDXI,CAACK,OAAO,CAAC,CAAC;AAACD,OAAA,CAAAC,ACYtB4B,EAAE,EAAE,GDZkB,CCYdC,EDZc7B,ECYV,CAAC,CAAC,CAAC8B,EDZO,KCYA,CAAC,CAAC;QACxBC,IAAI,EAAEb,MAAM,CAACc,KAAK;QAClBjB,IAAI,EAAEI,MAAM,CAACa,KAAK;QAClBC,KAAK,EAAEP;MACX,CAAC;MACD7B,YAAE,CAACqC,UAAU,CAAC,SAAS,CAAC,CACnBC,GAAG,CAACR,IAAI,CAAC,CACTF,IAAI,CAAC,YAAM;QACRW,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,cAAc;MACzC,CAAC,CAAC,CACDC,KAAK,CAAC,UAAClB,KAAK,EAAK;QACdC,OAAO,CAACkB,GAAG,CAACnB,KAAK,CAAC;MACtB,CAAC,CAAC;IACV,CAAC,CAAC;EACN,CACJ,CAAC;AACL;AAEA,IAAMb,WAAW,GAAGJ,QAAQ,CAACC,aAAa,CAAC,aAAa,CAAC;AACzDG,WAAW,CAACF,gBAAgB,CAAC,QAAQ,EAAEmC,cAAc,CAAC;AAEtD,SAASA,cAAcA,CAACC,CAAC,EAAE;EACvB,IAAMC,KAAK,GAAGvC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC9C,IAAMI,IAAI,GAAGiC,CAAC,CAACE,MAAM,CAAClC,KAAK,CAAC,CAAC,CAAC;EAE9B,IAAID,IAAI,EAAE;IACN,IAAMoC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAE/BD,MAAM,CAACE,MAAM,GAAG,UAACC,KAAK,EAAK;MACvBL,KAAK,CAACM,YAAY,CAAC,KAAK,EAAED,KAAK,CAACJ,MAAM,CAACM,MAAM,CAAC;IAClD,CAAC;IACDL,MAAM,CAACM,aAAa,CAAC1C,IAAI,CAAC;EAC9B;AACJ","file":"upload.267c3b0c.js","sourceRoot":"..","sourcesContent":["const firebaseConfig = {\r\n    apiKey: 'AIzaSyDBWZgf69JelbmqlPPPzj56W5yFL-Q5wZo',\r\n    authDomain: 'project-1-8debf.firebaseapp.com',\r\n    projectId: 'project-1-8debf',\r\n    storageBucket: 'project-1-8debf.appspot.com',\r\n    messagingSenderId: '386056815137',\r\n    appId: '1:386056815137:web:92425cb061808073ed9960',\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const db = firebase.firestore();\r\nexport const storage = firebase.storage();\r\n","import { db, storage } from './firebase';\r\n\r\nconst btnSubmitEl = document.querySelector('.btn-submit');\r\nbtnSubmitEl.addEventListener('click', uploadData);\r\n\r\nfunction uploadData() {\r\n    const inputFileEl = document.querySelector('.input-file');\r\n    const file = inputFileEl.files[0];\r\n    const storageRef = storage.ref();\r\n    const savePath = storageRef.child('image/' + file.name);\r\n    const upload = savePath.put(file);\r\n\r\n    const rankEl = document.querySelector('.input-rank');\r\n    const nameEl = document.querySelector('.input-name');\r\n\r\n    upload.on(\r\n        'state_changed',\r\n        null,\r\n        (error) => {\r\n            console.error('실패 사유는', error);\r\n        },\r\n        () => {\r\n            upload.snapshot.ref.getDownloadURL().then((url) => {\r\n                let item = {\r\n                    id: new Date().getTime(),\r\n                    rank: rankEl.value,\r\n                    name: nameEl.value,\r\n                    photo: url,\r\n                };\r\n                db.collection('profile')\r\n                    .add(item)\r\n                    .then(() => {\r\n                        window.location.href = './index.html';\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                    });\r\n            });\r\n        }\r\n    );\r\n}\r\n\r\nconst inputFileEl = document.querySelector('.input-file');\r\ninputFileEl.addEventListener('change', showPreviewImg);\r\n\r\nfunction showPreviewImg(e) {\r\n    const imgEl = document.querySelector('.image');\r\n    const file = e.target.files[0];\r\n\r\n    if (file) {\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = (event) => {\r\n            imgEl.setAttribute('src', event.target.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n}\r\n"]}